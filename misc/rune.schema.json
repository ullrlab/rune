{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"type": "object",
	"properties": {
        "configs": {
            "properties": {
                "target": { "type": "string", "description": "Name of the build target" },
                "profile": { "type": "string", "description": "Default profile to use" },
                "test_profile": { "type": "string", "description": "Default test profile to use"},
                "output": { "type": "string", "description": "Output directory" },
                "test_output": { "type": "string", "description": "Output directory for tests. Defaults to no output", "default": "none" },
                "target_type": {
                    "type": "string",
                    "enum": [
                        "exe",
                        "test",
                        "dll",
                        "shared",
                        "dynamic",
                        "lib",
                        "static",
                        "obj",
                        "object",
                        "assembly",
                        "assembler",
                        "asm",
                        "llvm-ir",
                        "llvm"
                    ],
                    "description": "Project build-mode. Defines the output of the project"
                }
            },
            "required": ["target", "output", "target_type"]
        },
        "profiles": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": { "type": "string", "description": "Name of the profile" },
                    "arch": { 
                        "type": "string",
                        "enum": [
                            "darwin_amd64", "darwin_arm64", "essence_amd64", "linux_i386","linux_amd64","linux_arm64","linux_arm32","linux_riscv64","windows_i386","windows_amd64",
                            "freebsd_i386","freebsd_amd64","freebsd_arm64","netbsd_amd64","netbsd_arm64","openbsd_amd64","haiku_amd64","freestanding_wasm32",
                            "wasi_wasm32","js_wasm32","orca_wasm32","freestanding_wasm64p32","js_wasm64p32","wasi_wasm64p32","freestanding_amd64_sysv",
                            "freestanding_amd64_win64","freestanding_arm64","freestanding_arm32","freestanding_riscv64"
                        ],
                        "description": "Architecture used by the profile"
                    },
                    "entry": { "type": "string", "description": "Entry point of the program. Should point to your program's root directory" },
                    "build_flags": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "description": "Extra build flags that can be passed to the compiler"
                        }
                    },
                    "pre_build": {
                        "scripts": {
                            "type": "array",
                            "description": "Series of scripts to run",
                            "items": { "type": "string", "description": "Name of the script to reference" }
                        }
                    },
                    "post_build": {
                        "type": "object",
                        "description": "Actions taken after the build happened",
                        "properties": {
                            "scripts": {
                                "type": "array",
                                "description": "Series of scripts to run",
                                "items": { "type": "string", "description": "Name of the script to reference" }
                            },
                            "copy": {
                                "type": "array",
                                "description": "List of files and directory to copy",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "from": { "type": "string", "description": "Source to copy from" },
                                        "to": { "type": "string", "description": "Destination in the output directory" }
                                    },
                                    "required": ["from", "to"]
                                }
                            }
                        }
                    }
                },
                "required": ["name", "arch", "entry"]
            }
        },
        "test_profiles": {
            "type": "array",
            "description": "List of different test profiles that can be use",
            "items": {
                "type": "object",
                "description": "Profile used for testing purposes",
                "properties": {
                    "name": { "type": "string", "description": "Name of the testing profile"},
                    "build_flags": {
                        "type": "array",
                        "description": "Build flags used by the profile",
                        "items": { "type": "string", "description": "Build flag to use" }
                    }
                },
                "required": ["name"]
            }
        },
        "scripts": {
            "type": "object",
            "description": "Series of scripts defines as \"name\": [command]'"
        }
	},
	"required": ["configs", "profiles"]
}