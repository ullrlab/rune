{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"type": "object",
	"properties": {
        "configs": {
            "properties": {
                "target": { "type": "string", "description": "Name of the build target" },
                "output": { "type": "string", "description": "Output directory" },
                "defaultProfile": { "type": "string", "description": "Default profile to use" }
            },
            "required": ["target", "output"]
        },
        "profiles": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": { "type": "string", "description": "Name of the profile" },
                    "arch": { "type": "string", "enum": ["x86", "x86_64", "arm", "aarch64", "riscv64"], "description": "Architecture used by the profile" },
                    "mode": { "type": "string", "enum": ["debug", "release"], "description": "Build mode used by the profile" },
                    "entry": { "type": "string", "description": "Entry point of the program. Should point to a directory" },
                    "pre-build": {
                        "type": "array",
                        "description": "Steps taken before the build happens",
                        "items": {
                            "type": "object",
                            "properties": {
                                "execute": {
                                    "type": "array",
                                    "description": "Execute a series of command sequentially",
                                    "items": {
                                        "type": "array",
                                        "description": "Command to execute",
                                        "items": { "type": "string" }
                                    }
                                }
                            }
                        }
                    },
                    "post-build": {
                        "type": "array",
                        "description": "Steps taken after the build happened",
                        "items": {
                            "type": "object",
                            "properties": {
                                "execute": {
                                    "type": "array",
                                    "description": "Execute a series of command sequentially",
                                    "items": {
                                        "type": "array",
                                        "description": "Command to execute",
                                        "items": { "type": "string" }
                                    }
                                },
                                "copy": {
                                    "type": "array",
                                    "description": "Copy files to output directory",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "from": { "type": "string", "description": "Source of the item to copy" },
                                            "to": { "type": "string", "description": "Destination of the item to copy relative to the output directory" }
                                        } 
                                    }
                                }
                            }
                        }
                    }
                },
                "required": ["name", "arch", "mode", "entry"]
            }
        }
	},
	"required": ["configs", "profiles"]
}